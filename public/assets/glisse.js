!function(t,e){t.glisse=function(i,n){var s,o,a=this,r=t(i),l={dataName:"data-glisse-big",speed:300,changeSpeed:1e3,effect:"bounce",mobile:!1,fullscreen:!1,disablindRightClick:!1,parent:null},h=!1,c={},u=[],d=function(t){return t.attr(a.settings.dataName)||t.attr("src")};a.settings={},a.els={},a.init=function(){a.settings=t.extend({},l,n),o=r.attr("rel")||null,a.settings.mobile=!!navigator.userAgent.match(/iPhone|iPod|iPad|Android/i),r.on("click",function(){s=d(r),f(),_(),g(s),y(),b(),p(),t(e).keydown(function(t){"27"===t.keyCode.toString()&&m(),"39"===t.keyCode.toString()&&v("next"),"37"===t.keyCode.toString()&&v("prev")}),a.settings.disablindRightClick&&a.els.content.on("contextmenu",function(){return!1}),a.settings.mobile&&(c={touching:!1,nx:0,oX:0,scrollX:null},e.ontouchmove=e.ontouchstart=e.ontouchend=T)})};var p=function(){function e(t){u.push(t)}var i,n,s=[];for(t('img[rel="'+o+'"]').each(function(){s.push(d(t(this)))}),n=0;n<s.length;n+=1)i=jQuery("<img>").attr("src",s[n]),i.load(e(s[n]))},f=function(){r.addClass("active");var i=x("transition")+"transition",n="opacity "+a.settings.speed+"ms ease, "+x("transform")+"transform "+a.settings.speed+"ms ease";if(a.els.wrapper=t(e.createElement("div")).attr("id","glisse-wrapper"),a.els.overlay=t(e.createElement("div")).attr("id","glisse-overlay").css(i,n),a.els.spinner=t(e.createElement("div")).attr("id","glisse-spinner"),a.els.close=t(e.createElement("span")).attr("id","glisse-close").css(i,n),a.els.content=t(e.createElement("div")).attr("id","glisse-overlay-content").css(i,n).css(x("transform")+"transform","scale(0)"),a.els.controls=t(e.createElement("div")).attr("id","glisse-controls").css(i,n),a.els.controlNext=t(e.createElement("span")).attr("class","glisse-next").append(t(e.createElement("a")).html("&#62;").attr("href","#")),a.els.controlLegend=t(e.createElement("span")).attr("class","glisse-legend"),a.els.controlPrev=t(e.createElement("span")).attr("class","glisse-prev").append(t(e.createElement("a")).html("&#60;").attr("href","#")),a.els.overlay.append(a.els.spinner),a.els.controls.append(a.els.controlNext,a.els.controlLegend,a.els.controlPrev),a.els.wrapper.append(a.els.overlay,a.els.close,a.els.content,a.els.controls),t("body").append(a.els.wrapper),k.observe("glisse-overlay",function(){a.els.overlay.css("opacity",1)}),k.observe("glisse-close",function(){a.els.close.css("opacity",1)}),k.observe("glisse-controls",function(){a.els.controls.css("opacity",1)}),a.els.controls.delegate("a","click",function(e){e.preventDefault();var i=t(this).parent().hasClass("glisse-next")?"next":"prev";v(i)}),a.els.overlay.on("click",function(){m()}),a.els.content.on("click",function(){m()}),a.els.close.on("click",function(){m()}),a.settings.fullscreen){var s=e.documentElement;s.requestFullscreen?s.requestFullscreen():s.mozRequestFullScreen?s.mozRequestFullScreen():s.webkitRequestFullScreen&&s.webkitRequestFullScreen()}},m=function(){a.els.content.css({opacity:0}).css(x("transform")+"transform","scale(1.2)"),a.els.overlay.css({opacity:0}),a.els.close.css({opacity:0}),a.els.controls.css({opacity:0}),setTimeout(function(){a.els.content.remove(),a.els.overlay.remove(),a.els.close.remove(),a.els.controls.remove(),a.els.wrapper.remove(),t("#glisse-transition-css").remove()},a.settings.speed),r.removeClass("active"),e.ontouchmove=function(){return!0},e.ontouchstart=function(){return!0},e.ontouchend=function(){return!0},t(e).unbind("keydown"),a.settings.fullscreen&&(e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen&&e.webkitCancelFullScreen())},g=function(e){w(!0);var i=t("<img/>",{src:e}).appendTo(a.els.content);a.els.content.css({backgroundImage:'url("'+e+'")'}),i.load(function(){i.remove(),w(!1),a.els.content.css({visibility:"visible",opacity:1}).css(x("transform")+"transform","scale(1)")})},v=function(e){var i=t("img["+a.settings.dataName+'="'+s+'"][rel='+o+"]"),n=t("img[rel="+o+"]").index(i),r=t("img[rel="+o+"]").length,l=!0;if((0===n&&"prev"===e||n===r-1&&"next"===e)&&(l=!1),l&&h===!1){h=!0;var c="next"===e?t("img[rel="+o+"]").eq(n+1):t("img[rel="+o+"]").eq(n-1);if(a.settings.mobile)"next"!==e?a.els.content.css(x("transform")+"transform","translateX(2000px)"):a.els.content.css(x("transform")+"transform","translateX(-2000px)");else{a.els.content.addClass("glisse-transitionOut-"+e);var p=x("transition")+"transition",f="opacity "+a.settings.speed+"ms ease, "+x("transform")+"transform "+a.settings.speed+"ms ease";a.els.content.css(p,"")}s=d(c),-1===t.inArray(s,u)&&w(!0),i.removeClass("active"),c.addClass("active"),y(),b(),setTimeout(function(){a.settings.mobile&&a.els.content.css(x("transform")+"transform","translateX(0px)").css("display","none");var i=t("<img/>",{src:s}).appendTo(a.els.content);a.els.content.css({backgroundImage:'url("'+s+'")'}),i.load(function(){i.remove(),-1===t.inArray(s,u)&&w(!1),a.settings.mobile&&a.els.content.css("display","block"),a.els.content.removeClass("glisse-transitionOut-"+e).addClass("glisse-transitionIn-"+e),setTimeout(function(){a.els.content.removeClass("glisse-transitionIn-"+e).css(p,f),h=!1},a.settings.changeSpeed)})},a.settings.changeSpeed)}else l===!1&&h===!1&&(a.settings.mobile&&a.els.content.css(x("transform")+"transform","translateX(0px)"),a.els.content.addClass("shake"),setTimeout(function(){a.els.content.removeClass("shake")},600))},_=function(){var i=x("transform"),n=x("animation"),s=[];switch(C(a.settings.effect)||(a.settings.effect="bounce"),a.settings.effect){case"bounce":s=["@"+n+"keyframes outLeft {","0% { "+i+"transform: translateX(0);}","20% { opacity: 1;"+i+"transform: translateX(20px);}","100% { opacity: 0;"+i+"transform: translateX(-2000px);}","}","@"+n+"keyframes inLeft {","0% {opacity: 0;"+i+"transform: translateX(-2000px);}","60% {opacity: 1;"+i+"transform: translateX(30px);}","80% {"+i+"transform: translateX(-10px);}","100% {"+i+"transform: translateX(0);}","}","@"+n+"keyframes outRight {","0% {"+i+"transform: translateX(0);}","20% {opacity: 1;"+i+"transform: translateX(-20px);}","100% {opacity: 0;"+i+"transform: translateX(2000px);}","}","@"+n+"keyframes inRight {","0% {opacity: 0;"+i+"transform: translateX(2000px);}","60% {opacity: 1;"+i+"transform: translateX(-30px);}","80% {"+i+"transform: translateX(10px);}","100% {"+i+"transform: translateX(0);}","}"].join("");break;case"fadeBig":s=["@"+n+"keyframes outLeft {","0% { opacity: 1;"+i+"transform: translateX(0);}","100% {opacity: 0;"+i+"transform: translateX(-2000px);}","}","@"+n+"keyframes inLeft {","0% { opacity: 0;"+i+"transform: translateX(-2000px);}","100% {opacity: 1;"+i+"transform: translateX(0);}","}","@"+n+"keyframes outRight {","0% { opacity: 1;"+i+"transform: translateX(0);}","100% {opacity: 0;"+i+"transform: translateX(2000px);}","}","@"+n+"keyframes inRight {","0% { opacity: 0;"+i+"transform: translateX(2000px);}","100% {opacity: 1;"+i+"transform: translateX(0);}","}"].join("");break;case"fade":s=["@"+n+"keyframes outLeft {","0% { opacity: 1;"+i+"transform: translateX(0);}","100% {opacity: 0;"+i+"transform: translateX(-200px);}","}","@"+n+"keyframes inLeft {","0% { opacity: 0;"+i+"transform: translateX(-200px);}","100% {opacity: 1;"+i+"transform: translateX(0);}","}","@"+n+"keyframes outRight {","0% { opacity: 1;"+i+"transform: translateX(0);}","100% {opacity: 0;"+i+"transform: translateX(200px);}","}","@"+n+"keyframes inRight {","0% { opacity: 0;"+i+"transform: translateX(200px);}","100% {opacity: 1;"+i+"transform: translateX(0);}","}"].join("");break;case"roll":s=["@"+n+"keyframes outLeft {","0% { opacity: 1;"+i+"transform: translateX(0px) rotate(0deg);}","100% {opacity: 0;"+i+"transform: translateX(-100%) rotate(-120deg);}","}","@"+n+"keyframes inLeft {","0% { opacity: 0;"+i+"transform: translateX(-100%) rotate(-120deg);}","100% {opacity: 1;"+i+"transform:  translateX(0px) rotate(0deg);}","}","@"+n+"keyframes outRight {","0% { opacity: 1;"+i+"transform:translateX(0px) rotate(0deg);}","100% {opacity: 0;"+i+"transform:translateX(100%) rotate(120deg);}","}","@"+n+"keyframes inRight {","0% { opacity: 0;"+i+"transform: translateX(100%) rotate(120deg);}","100% {opacity: 1;"+i+"transform:  translateX(0px) rotate(0deg);}","}"].join("");break;case"rotate":s=["@"+n+"keyframes outRight {","0% { opacity: 1;"+i+"transform: rotate(0deg);"+i+"transform-origin:left bottom;}","100% {opacity: 0;"+i+"transform: rotate(-90deg);"+i+"transform-origin:left bottom;}","}","@"+n+"keyframes inLeft {","0% { opacity: 0;"+i+"transform: rotate(90deg);"+i+"transform-origin:left bottom;}","100% {opacity: 1;"+i+"transform: rotate(0deg);"+i+"transform-origin:left bottom;}","}","@"+n+"keyframes outLeft {","0% { opacity: 1;"+i+"transform: rotate(0deg);"+i+"transform-origin:right bottom;}","100% {opacity: 0;"+i+"transform: rotate(90deg);"+i+"transform-origin:right bottom;}","}","@"+n+"keyframes inRight {","0% { opacity: 0;"+i+"transform: rotate(-90deg);"+i+"transform-origin:right bottom;}","100% {opacity: 1;"+i+"transform: rotate(0deg);"+i+"transform-origin:right bottom;}","}"].join("");break;case"flipX":s=["@"+n+"keyframes outLeft {","0% {"+i+"transform: perspective(400px) rotateX(0deg);opacity: 1;}","100% {"+i+"transform: perspective(400px) rotateX(90deg);opacity: 0;}","}","@"+n+"keyframes inLeft {","0% {"+i+"transform: perspective(400px) rotateX(90deg);opacity: 0;}","40% {"+i+"transform: perspective(400px) rotateX(-10deg);}","70% {"+i+"transform: perspective(400px) rotateX(10deg);}","100% {"+i+"transform: perspective(400px) rotateX(0deg);opacity: 1;}","}","@"+n+"keyframes outRight {","0% {"+i+"transform: perspective(400px) rotateX(0deg);opacity: 1;}","100% {"+i+"transform: perspective(400px) rotateX(90deg);opacity: 0;}","}","@"+n+"keyframes inRight {","0% {"+i+"transform: perspective(400px) rotateX(90deg);opacity: 0;}","40% {"+i+"transform: perspective(400px) rotateX(-10deg);}","70% {"+i+"transform: perspective(400px) rotateX(10deg);}","100% {"+i+"transform: perspective(400px) rotateX(0deg);opacity: 1;}","}"].join("");break;case"flipY":s=["@"+n+"keyframes outLeft {","0% {"+i+"transform: perspective(400px) rotateY(0deg);opacity: 1;}","100% {"+i+"transform: perspective(400px) rotateY(90deg);opacity: 0;}","}","@"+n+"keyframes inLeft {","0% {"+i+"transform: perspective(400px) rotateY(90deg);opacity: 0;}","40% {"+i+"transform: perspective(400px) rotateY(-10deg);}","70% {"+i+"transform: perspective(400px) rotateY(10deg);}","100% {"+i+"transform: perspective(400px) rotateY(0deg);opacity: 1;}","}","@"+n+"keyframes outRight {","0% {"+i+"transform: perspective(400px) rotateY(0deg);opacity: 1;}","100% {"+i+"transform: perspective(400px) rotateY(-90deg);opacity: 0;}","}","@"+n+"keyframes inRight {","0% {"+i+"transform: perspective(400px) rotateY(90deg);opacity: 0;}","40% {"+i+"transform: perspective(400px) rotateY(-10deg);}","70% {"+i+"transform: perspective(400px) rotateY(10deg);}","100% {"+i+"transform: perspective(400px) rotateY(0deg);opacity: 1;}","}"].join("")}var o=[".glisse-transitionOut-next {",n+"animation: "+a.settings.changeSpeed+"ms ease;",n+"animation-name: outLeft;",n+"animation-fill-mode: both;","}",".glisse-transitionIn-prev {",n+"animation: "+a.settings.changeSpeed+"ms ease;",n+"animation-name: inLeft;",n+"animation-fill-mode: both;","}",".glisse-transitionOut-prev {",n+"animation: "+a.settings.changeSpeed+"ms ease;",n+"animation-name: outRight;",n+"animation-fill-mode: both;","}",".glisse-transitionIn-next {",n+"animation: "+a.settings.changeSpeed+"ms ease;",n+"animation-name: inRight;",n+"animation-fill-mode: both;","}"].join("");e.getElementById("glisse-css")?t("#glisse-css").html(s+o):t('<style type="text/css" id="glisse-css">'+s+o+"</style>").appendTo("head")},y=function(){var e=t("img["+a.settings.dataName+'="'+s+'"]'),i=a.settings.parent?e.closest(a.settings.parent):e.parent();i.next().find("img[rel="+o+"]").length?a.els.controls.find(".glisse-next").removeClass("ended"):a.els.controls.find(".glisse-next").addClass("ended"),i.prev().find("img[rel="+o+"]").length?a.els.controls.find(".glisse-prev").removeClass("ended"):a.els.controls.find(".glisse-prev").addClass("ended")},b=function(){var e=a.els.controls.find(".glisse-legend"),i=t("img["+a.settings.dataName+'="'+s+'"]'),n=i.attr("title");e.html(n?n:"")},w=function(t){a.els.overlay.toggleClass("loading",t)},x=function(t){for(var i=["Moz","Khtml","Webkit","O","ms"],n=e.createElement("div"),s=t.charAt(0).toUpperCase()+t.slice(1),o=i.length;o--;)if(i[o]+s in n.style)return"-"+i[o].toLowerCase()+"-";return!1},k=function(){return{observe:function(t,i){var n=setInterval(function(){e.getElementById(t)&&(i(e.getElementById(t)),clearInterval(n))},60)}}}(),C=function(e){return!!~t.inArray(e,["bounce","fadeBig","fade","roll","rotate","flipX","flipY"])},T=function(t){if("touchstart"==t.type){if(c.touching=!0,1==t.touches.length){a.els.content.css(x("transition")+"transition","");var e=t.touches[0];e.target.onclick&&e.target.onclick(),c.oX=e.pageX,c.nX=0,c.scrollX=0}}else if("touchmove"==t.type){if(t.preventDefault(),c.scrollX=null,1==t.touches.length){var e=t.touches[0];c.nX=e.pageX,c.oX>c.nX?c.scrollX=-(c.oX-c.nX):c.nX>c.oX&&(c.scrollX=c.nX-c.oX),a.els.content.css(x("transform")+"transform","translateX("+c.scrollX+"px)")}}else if("touchend"==t.type||"touchcancel"==t.type){c.touching=!1;var i=x("transition")+"transition",n="opacity "+a.settings.speed+"ms ease, "+x("transform")+"transform "+a.settings.speed+"ms ease";a.els.content.css(i,n),c.scrollX>140?v("prev"):c.scrollX<-140?v("next"):a.els.content.css(x("transform")+"transform","translateX(0px)")}};a.changeEffect=function(t){C(t)&&(a.settings.effect=t,_())},a.init()},t.fn.glisse=function(e){return this.each(function(){if(void 0===t(this).data("glisse")){var i=new t.glisse(this,e);t(this).data("glisse",i)}})}}(jQuery,window.document);